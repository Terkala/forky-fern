# SPDX-FileCopyrightText: 2024 IProduceWidgets <107586145+IProduceWidgets@users.noreply.github.com>
# SPDX-FileCopyrightText: 2024 BramvanZijp <56019239+BramvanZijp@users.noreply.github.com>
# SPDX-FileCopyrightText: 2024 deltanedas <39013340+deltanedas@users.noreply.github.com>
# SPDX-FileCopyrightText: 2024 LankLTE <135308300+LankLTE@users.noreply.github.com>
# SPDX-FileCopyrightText: 2024 Ed <96445749+TheShuEd@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 Pieter-Jan Briers <pieterjan.briers+git@gmail.com>
# SPDX-FileCopyrightText: 2025 Hannah Giovanna Dawson <karakkaraz@gmail.com>
# SPDX-License-Identifier: MIT

- type: entityTable
  id: UnknownShuttlesHostileTable
  table: !type:AllSelector # we need to pass a list of rules, since rules have further restrictions to consider via StationEventComp
    children:
    - id: LoneOpsSpawn
    - id: UnknownShuttleManOWar
    - id: UnknownShuttleInstigator

# Shuttle Game Rules

- type: entity
  abstract: true
  parent: BaseGameRule
  id: BaseUnknownShuttleRule
  components:
  - type: StationEvent
    weight: 10 # 10 default
    reoccurrenceDelay: 30
    duration: 1
    maxOccurrences: 1
  - type: RuleGrids
  - type: LoadMapRule

- type: entity
  abstract: true
  parent: BaseUnknownShuttleRule
  id: BaseUnknownShuttleAnnouncedRule
  components:
  - type: StationEvent
    startAnnouncement: station-event-unknown-shuttle-incoming
    startAudio:
      path: /Audio/Announcements/attention.ogg

# The power of 3 clowns proved too strong for the players and may need to be 1984'ed. Replace this with a more engaging clown shuttle.
- type: entity
  parent: BaseUnknownShuttleAnnouncedRule
  id: UnknownShuttleHonki
  components:
  - type: StationEvent
    weight: 2
  - type: LoadMapRule
    gridPath: /Maps/Shuttles/ShuttleEvent/honki.yml

- type: entity
  parent: BaseUnknownShuttleRule
  id: UnknownShuttleSyndieEvacPod
  components:
  - type: StationEvent
    weight: 5 # lower because weird freelance roles
    maxOccurrences: 2
  - type: LoadMapRule
    gridPath: /Maps/Shuttles/ShuttleEvent/syndie_evacpod.yml

- type: entity
  id: UnknownShuttleNTQuark
  parent: BaseUnknownShuttleRule
  components:
  - type: StationEvent
    weight: .5 # Hopefully this is uncommon enough, it needs to be uncommon enough that people wont waste time metaknowledging it.
    earliestStart: 45 # late to hopefully have enough ghosts to fill all roles quickly.
    minimumPlayers: 25
  - type: LoadMapRule
    gridPath: /Maps/Shuttles/ShuttleEvent/quark.yml

- type: entity
  id: UnknownShuttleInstigator
  parent: BaseUnknownShuttleRule
  components:
  - type: StationEvent
    weight: 0.1 #  approximately 1/1000 on the random hostile shuttle table. Golden Legendary!
  - type: LoadMapRule
    gridPath: /Maps/Shuttles/ShuttleEvent/instigator.yml

- type: entity
  id: UnknownShuttleManOWar
  parent: BaseUnknownShuttleRule
  components:
  - type: StationEvent
    weight: 1 # lower because antags
  - type: LoadMapRule
    gridPath: /Maps/Shuttles/ShuttleEvent/manowar.yml
